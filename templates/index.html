<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>タスク管理アプリ</title>
</head>

<body>
    <h1>タスク管理アプリ</h1>

    <form action="/add" method="POST">
        <input type="text" name="title" placeholder="タスクを入力" required>
        <input type="date" name="deadline">
        <button type="submit">追加</button>
    </form>

    <hr>

    <h3>未完了のタスク</h3>
    <ul>
        {% for task in tasks if task.is_completed == 0 %}
        <li>
            <input type="checkbox" onclick="location.href='/complete/{{ task.id }}'">
            {{ task.title }}
            <a href="/delete/{{ task.id }}" style="color: red; margin-left: 10px;">[削除]</a>

            {% if task.is_completed == 1 %}<del>
                {% endif %}
                <strong>{{ task.title }}</strong>
                (期限: {{ task.deadline if task.deadline else 'なし' }})
                {% if task.is_completed == 1 %}
            </del> (完了){% endif %}

            <a href="/complete/{{ task.id }}">[完了/未完了]</a>
            <a href="/delete/{{ task.id }}">[削除]</a>
        </li>
        {% endfor %}
    </ul>

    <hr>

    <h3>完了したタスク</h3>
    <ul>
        {% for task in tasks if task.is_completed == 1 %}
        <li style="text-decoration: line-through; color: gray;">
            <input type="checkbox" checked onclick="location.href='/complete/{{ task.id }}'">
            <span style="background: #eee; padding: 2px 5px; border-radius: 3px;">完了</span>
            {{ task.title }}
            <a href="/delete/{{ task.id }}" style="color: red; margin-left: 10px;">[削除]</a>
        </li>
        {% endfor %}
    </ul>
</body>
</html>